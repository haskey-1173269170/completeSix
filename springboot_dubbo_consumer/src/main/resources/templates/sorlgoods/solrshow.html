<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
       xmlns:th="http://www.w3.org/1999/xhtml">
<head>
<!-- Basic page needs -->
<meta charset="utf-8">
<!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <![endif]-->
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>MyStore premium HTML5 &amp; CSS3 template</title>
<meta name="description" content="">

<!-- Mobile specific metas  -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Favicon  -->
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

<!-- Google Fonts -->
<link href='https://fonts.googleapis.com/css?family=Roboto:400,400italic,500,500italic,700' rel='stylesheet' type='text/css'>

<!-- CSS Style -->

<!-- Bootstrap CSS -->
<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">

<!-- font-awesome & simple line icons CSS -->
<link rel="stylesheet" type="text/css" href="../css/font-awesome.css" media="all">
<link rel="stylesheet" type="text/css" href="../css/simple-line-icons.css" media="all">

<!-- owl.carousel CSS -->
<link rel="stylesheet" type="text/css" href="../css/owl.carousel.css">
<link rel="stylesheet" type="text/css" href="../css/owl.theme.css">
<link rel="stylesheet" type="text/css" href="../css/owl.transitions.css">

<!-- animate CSS  -->
<link rel="stylesheet" type="text/css" href="../css/animate.css" media="all">

<!-- flexslider CSS -->
<link rel="stylesheet" type="text/css" href="../css/flexslider.css" >

<!-- jquery-ui.min CSS  -->
<link rel="stylesheet" type="text/css" href="../css/jquery-ui.css">

<!-- Mean Menu CSS -->
<link rel="stylesheet" type="text/css" href="../css/meanmenu.min.css">

<!-- nivo-slider css -->
<link rel="stylesheet" type="text/css" href="../css/nivo-slider.css">

<!-- style CSS -->
<link rel="stylesheet" type="text/css" href="../css/style.css" media="all">
  <!-- jquery js -->
  <script type="text/javascript" src="../js/jquery.min.js"></script>

  <!-- bootstrap js -->
  <script type="text/javascript" src="../js/bootstrap.min.js"></script>

  <!-- Mean Menu js -->
  <script type="text/javascript" src="../js/jquery.meanmenu.min.js"></script>

  <!-- owl.carousel.min js -->
  <script type="text/javascript" src="../js/owl.carousel.min.js"></script>

  <!-- bxslider js -->
  <script type="text/javascript" src="../js/jquery.bxslider.js"></script>

  <!--jquery-ui.min js -->
  <script type="text/javascript" src="../js/jquery-ui.js"></script>

  <!-- countdown js -->
  <script type="text/javascript" src="../js/countdown.js"></script>

  <!-- wow JS -->
  <script type="text/javascript" src="../js/wow.min.js"></script>

  <!--cloud-zoom js -->
  <script type="text/javascript" src="../js/cloud-zoom.js"></script>

  <!-- main js -->
  <script type="text/javascript" src="../js/main.js"></script>

  <!-- nivo slider js -->
  <script type="text/javascript" src="../js/jquery.nivo.slider.js"></script>

  <!-- flexslider js -->
  <script type="text/javascript" src="../js/jquery.flexslider.js"></script>
  <!--vue-->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!--分页组件-->
  <link rel="stylesheet" type="text/css" href="../jquerypage/css/zxf_page.css">
  <script src="../jquerypage/js/zxf_page.js"></script>
  <!--vue分页-->
  <script src="../vuepage/vue.js"></script>
  <script src="../vuepage/zpageNav.js"></script>
  <link rel="stylesheet" type="text/css" href="../vuepage/zpageNav.css">
</head>

<body class="shop_grid_page">

     

<!--[if lt IE 8]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]--> 


<div id="page"> 
<!-- Header -->
  <header>
    <div class="header-container">

      <div class="container">
        <div class="row">
          <div class="col-sm-3 col-md-3 col-xs-12"> 
            <!-- 跳转到主页 -->
            <div class="logo"><a title="e-commerce"  href="../to/index"><img alt="e-commerce" src="../images/pulse1.png"></a> </div>
            <!-- End Header Logo --> 
          </div>
          <div class="col-xs-12 col-sm-5 col-md-5 col-lg-6"> 
            <!-- 搜索 -->
            <div class="top-search">
              <div id="search">
                <form>
                  <div class="input-group">
                    <select class="cate-dropdown hidden-xs hidden-sm" name="category_id" onchange="selectsetBigType(this.value)">
                      <!--主搜有下拉-->
                      <option value="">所有分类</option>
                      <option value="1">手机</option>
                      <option value="2">电脑</option>
                      <option value="3">电视</option>
                    </select>
                    <input type="text" class="form-control" placeholder="Search" th:value="${qp.flag}" name="search">
                    <button class="btn-search" type="button" onclick="queryByflag()"><i class="fa fa-search"></i></button>
                  </div>
                </form>
              </div>
            </div>
            
            <!-- End Search --> 
          </div>
          <div class="col-lg-3 col-sm-4 col-xs-12 top-cart">
            <div class="link-wishlist"> <a title="前往我的收藏" href="javascript:towish()"><i class="fa fa-heart fa-lg"></i> </a> </div>
            <div class="top-cart-contain">
              <div class="mini-cart">
                <div class="basket dropdown-toggle">
                  <a title="前往我的购物车" href="../toCart">
                    <i class="fa fa-shopping-cart"></i>
                  </a>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- end header --> 
   <!-- Start Menu Area -->
  <div class="menu-area">
    <div class="container">
      <div class="row">
        <div class="col-md-12 hidden-xs">
          <div class="main-menu">
            <nav>
              <ul>
                <li ><a href="javascript:setBigType(1,'手机')">手机</a>
                  <ul class="dropdown">

                    <span id="phoneIdd"></span>

                  </ul>
                </li>
                <li ><a href="javascript:setBigType(2,'电脑')">电脑</a>
                  <ul class="dropdown">

                    <span id="compIdd"></span>

                  </ul>
                </li>
                <li ><a href="javascript:setBigType(3,'电视')">电视</a>
                  <ul class="dropdown">

                    <span id="tevleIdd"></span>

                  </ul>
                </li>
              </ul>
            </nav>
            <!-- Signup -->
            <p class="top-Signup"><span id="loginIdd"></span></p>
            <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header"> <img id="img_logo" src="../images/logo.png" alt="logo">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> </button>
                  </div>
                  <div id="div-forms">
                    <form id="login-form">
                      <div class="modal-body">
                        <div id="div-login-msg"> <span id="text-login-msg">Username or email address </span> </div>
                        <input id="login_username" class="form-control" type="text" placeholder="Username" required>
                        <input id="login_password" class="form-control" type="password" placeholder="Password" required>
                        <div class="checkbox">
                          <label>
                            <input type="checkbox">
                            Remember me </label>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <div>
                          <button type="submit" class="btn-login">Login</button>
                        </div>
                        <div>
                          <button onclick="location.href='account_page.html'" id="login_register_btn" type="button" class="btn btn-link">Register</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <!-- END # MODAL LOGIN -->
          </div>
        </div>
      </div>
    </div>

  </div>
  <!-- End Menu Area --> 
  

  <!-- 小标题 -->
  
  <div class="breadcrumbs">
    <div class="container">
      <div class="row">
        <div class="col-xs-12">
          <ul>
            <!--主页-->
            <li class="home"> <a title="主页" href="../to/index">主页</a><span>&raquo;</span></li>
            <li class=""> <a title="你的结果" href="javascript:initsolr()">你的结果</a><span></span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- Breadcrumbs End --> 
  <!-- 商品分页及展示页面 -->
  <div class="main-container col1-layout">
    <div class="container">
      <div class="row">
        <div class="col-main col-sm-12 col-xs-12">
          <div class="shop-inner">
            <div class="page-title">
              <h2><span th:text="${qp.bigTypeName}"></span> <span th:text="${qp.smalltypename}"></span></h2>
            </div>
            <div class="toolbar column">
              <div class="sorter">
                <div class="short-by">
                  <label>排序方式:</label>
                  <select id="orderid" onchange="initsolr()">
                    <option selected="selected" value="time" >默认</option>
                    <option value="sale">销量</option>
                    <option value="time">新品</option>
                    <option value="price">价格</option>
                  </select>
                  <span><a href="javascript:setdesc(1)">↑</a></span>
                  <span><a href="javascript:setdesc(2)">↓</a></span>
                  <input type="hidden" id="descId" value="1">
                </div>
                <div class="short-by page">
                  <label>显示:</label>
                  <select id="pageCountId" onchange="initsolr()">
                    <option selected="selected">8</option>
                    <option>16</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="product-grid-area" id="goods-show">
              <ul class="products-grid">

                <!--循环-->
                <li class="item col-lg-3 col-md-4 col-sm-6 col-xs-12"  v-for="good in rows">
                  <!--id隐藏域-->
                  <div class="product-item">
                    <div class="item-inner">
                      <div class="product-thumbnail">
                        <div class="btn-quickview"> <a :href="'javascript:querydetais('+good.id+')'"><span>查看详情</span></a></div>
                        <a href="single_product.html" class="product-item-photo"> <img class="product-image-photo" :src="good.img" width="165px" height="220px" alt=""></a> </div>
                      <div class="pro-box-info">
                        <div class="item-info">
                          <div class="info-inner">
                            <div class="item-title"> <a :title="good.name" href="single_product.html"><span v-html="good.name">{{good.name}}</span></a> </div>
                            <div class="item-content">
                              <div class="rating"> <i class="fa fa-star"></i> <i class="fa fa-star-o"></i> <i class="fa fa-star-o"></i> <i class="fa fa-star-o"></i> <i class="fa fa-star-o"></i> </div>
                              <div class="item-price">
                                <div class="price-box">
                                  <p class="special-price"> <span class="price-label">Special Price</span> <span class="price">￥{{good.price}}</span> </p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="box-hover">
                          <div class="product-item-actions">
                            <div class="pro-actions">
                              <button class="action add-to-cart" type="button" :onclick="'addtocar('+good.id+')'" title="添加购物车"> <span>添加购物车</span> </button>
                            </div>
                            <div class="add-to-links" data-role="add-to-links"> <a  :href="'javascript:addtowishlist('+good.id+')'" class="action add-to-wishlist" title="收藏"> <span>收藏</span> </a> <a href="#" class="action add-to-compare" title="Add to Compare"> <span>Compare</span> </a> </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="pagination-area ">
              <div class="zxf_pagediv"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <zpagenav v-bind:page="page" v-bind:page-size="pageSize" v-bind:total="total"
              v-bind:max-page="maxPage"  v-on:pagehandler="pageHandler">
    </zpagenav>
  </div>
  <!-- Main Container End --> 
   <!-- our clients Slider -->
  
  <div class="our-clients">
    <div class="slider-items-products">
      <div id="our-clients-slider" class="product-flexslider hidden-buttons">
        <div class="slider-items slider-width-col6"> 
          
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand1.png" alt="Image"></a> </div>
          <!-- End Item --> 
          
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand2.png" alt="Image"></a> </div>
          <!-- End Item --> 
          
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand3.png" alt="Image"></a> </div>
          <!-- End Item --> 
          
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand4.png" alt="Image"></a> </div>
          <!-- End Item --> 
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand5.png" alt="Image"></a> </div>
          <!-- End Item --> 
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand6.png" alt="Image"></a> </div>
          <!-- End Item --> 
          <!-- Item -->
          <div class="item"> <a href="#"><img src="../images/brand7.png" alt="Image"></a> </div>
          <!-- End Item --> 
          
        </div>
      </div>
    </div>
  </div>
  <div class="bottom-service">
    <div class="row">
      <div class="col-xs-12 col-sm-12">
        <div class="bottom-service-box">
          <div class="box-outer">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
              <div class="service-box-center"> <span class="bottom-service-title">Buy 2 items</span>
                <div class="description">
                  <div class="heading">Get one for free!</div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 column">
              <div class="service-box-center"> <span class="bottom-service-title">Daily Sales</span>
                <div class="description">
                  <div class="heading">Today up to 45% off!</div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 column">
              <div class="service-box-center"> <span class="bottom-service-title">NEW ARRIVAL</span>
                <div class="description">
                  <div class="heading">Sale up to 75% off</div>
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6 column">
              <div class="service-box-center"> <span class="bottom-service-title">UpTO 45% off</span>
                <div class="description">
                  <div class="heading">Your first purchase</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--小类-->
  <input id="smalltypeid" th:value="${qp.smallTypeid}" type="text">
  <input id="smalltypename"  type="hidden">
  <!--大类-->
  <input type="text" th:value="${qp.bigTypeId}" id="bigtypeid">
  <input type="hidden" id="bigtypename">

<script>
  var vm=new Vue({
    el:'#goods-show',
    data:{
      rows:[]
    }
  })

    $(function () {
      initsolr();
      loginUserAndLongout()
      initTypeTwo();
    })
    function initsolr(start) {
      var order=$("#orderid").val()
      var flag = $("[name='search']").val()
      var pageCount = $("#pageCountId").val()
      var orderType = $("#descId").val()
      var bigTypeId= $("#bigtypeid").val()
      var smallTypeid= $("#smalltypeid").val()
      var pageNow=1
      if(start!=undefined){
        pageNow=start
      }
      $.ajax({
        url:"../goodssolr/queryGoods",
        type:"post",
        data:{'pageNow':pageNow,'pageCount':pageCount,'flag':flag,'order':order,'orderType':orderType,'brandId':smallTypeid,'typeId':bigTypeId},
        dataType:"json",
        success:function (data) {
              setPage(data.pageNow,data.pageSize)
              vm.rows=[]
              for(let index in data.list) {
                Vue.set(vm.rows, index, data.list[index]);
              };

        }
      })
    }
  <!--主搜索下拉响应时间-->
  function selecFacon(id){
    location.href="../tosolr/tosolrshow?flag="+id;
  }

    /*分页*/
    function setPage(current,pageNum){

      $(".zxf_pagediv").createPage({
        pageNum: pageNum,
        current: current,
        backfun: function(e) {
          $("#pageId").val(e.current)
          initsolr(e.current)
        }
      });
    }
    function setdesc(flag){
      $("#descId").val(flag)
      initsolr()
    }
    function queryByflag() {
      var flag = $("[name='search']").val()
      location.href="../tosolr/tosolrshow?flag="+flag
    }
    /*查看详情*/
    function querydetais(id) {
      location.href="../commodity/queryCommodityById?id="+id;
    }
    /*添加到购物车*/
    function addtocar(id) {
      location.href="../commodity/queryCommodityById?id="+id;
    }
    /*添加到收藏*/
    function addtowishlist(id){
      $.ajax({
        url:"../collect/addCollect?commodityId="+id,
        success:function (data) {
          //alert("已加入我的关注")
        }
      })
    }
    /*跳转收藏页面*/
    function towish() {
      location.href="../collect/tocollect";
    }

  <!--登录-->
  function loginUserAndLongout(){
    $.ajax({
      url:"../comd/loginAndLoginout",
      type:"post",
      success:function(data){
        if(data.cmsUser!==111){
          $("#loginIdd").html('<button data-toggle="modal" style="font-weight:bold;font-size:20px" role="button" onclick="Longout()" id="login_register_btn" type="button" class="btn btn-link">注销</button>')
        }else{
          $("#loginIdd").html('<button data-toggle="modal" style="font-weight:bold;font-size:20px" role="button" onclick="loginAgain()" id="login_register_btn" type="button" class="btn btn-link">登录</button>')
        }
      }
    })
  }
  <!--未登录访问页面-->
  function loginAgain(){
    location.href='../to/cmsLogin'
  }


  <!--查询红框类型-->
  function initTypeTwo(){
    $.ajax({
      url:"../comd/queryTypeTwo",
      type:"post",
      dataType:"json",
      success:function(data){
        var count=0;
        for(var i=0;i<data.length;i++){
          var phoneInfo="";
          count++;
          var id="";
          var text="";
          var arr=data[i].productBrand_Id.split(",");
          var arr1=data[i].productBrand_name.split(",");
          var arrlength=arr.length;
          for(var j=0;j<arrlength;j++){
            phoneInfo+='<li><a href="javascript:setSmallType('+arr[j]+',\''+arr1[j]+'\')">'+arr1[j]+'</a></li>'
          }
          if(count==1){
            $("#phoneIdd").html(phoneInfo)
          }
          if(count==2){
            $("#compIdd").html(phoneInfo)
          }
          if(count==3){
            $("#tevleIdd").html(phoneInfo)
          }
        }
      }
    })
  }
  /*大类*/
  function setBigType(id,name) {
    $("#bigtypeid").val(id)
    $("#bigtypename").val(name)
    queryType()
  }
  /**/
  function selectsetBigType(id) {
    if(id==1){
      setBigType(1,'手机')
    }else if(id==2){
      setBigType(2,'电脑')
    }else {
      setBigType(3,'电视')
    }
  }
  /*小类*/
  function setSmallType(id,name) {
    $("#smalltypeid").val(id)
    $("#smalltypename").val(name)
    queryType()
  }

  <!--标签框-->
  function queryType(id){
    if (id="undefined"){
      id="";
    }
    var bigTypeId= $("#bigtypeid").val()
    var bigTypeName= $("#bigtypename").val()
    var smallTypeid= $("#smalltypeid").val()
    var smalltypename= $("#smalltypename").val()
    location.href="../tosolr/tosolrshow?flag="+id+"&bigTypeId="+bigTypeId+"&bigTypeName="+bigTypeName+
            "&smallTypeid="+smallTypeid+"&smalltypename="+smalltypename;
  }


  <!--注销-->
  function Longout(){
    location.href="../comd/loginOut";
  }
</script>

</body>
</html>
